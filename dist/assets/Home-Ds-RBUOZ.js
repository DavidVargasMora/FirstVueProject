import{_ as h,r as g,o as d,c as p,a as t,b as x,w as $,v as B,F as R,p as M,d as I,e as U,f as P,t as A,g as T,h as H,u as V,n as J,i as X,j as D,k as w,l as b,m as z,q as N,s as F,T as j,x as q,y}from"./index-DUG-QntC.js";const E=e=>(M("data-v-d33c4cf0"),e=e(),I(),e),W={class:"header"},Z={class:"resume"},K={class:"movements"},Q=E(()=>t("div",{class:"grip"},null,-1)),Y=[Q],ee={class:"body"},te={__name:"Layout",setup(e){const o=g(!1);return(a,s)=>(d(),p(R,null,[t("div",W,[x(a.$slots,"header",{},void 0,!0)]),t("div",Z,[x(a.$slots,"resume",{},void 0,!0)]),t("div",K,[t("div",{class:"head",onClick:s[0]||(s[0]=l=>o.value=!o.value)},Y),$(t("div",ee,[x(a.$slots,"movements",{},void 0,!0)],512),[[B,o.value]])])],64))}},oe=h(te,[["__scopeId","data-v-d33c4cf0"]]),se={methods:{reload(){location.reload()}}},G=e=>(M("data-v-82905c32"),e=e(),I(),e),ne=G(()=>t("h1",null,[t("span",null,"Cash"),P("Flow ")],-1)),ae=G(()=>t("span",null,null,-1));function le(e,o,a,s,l,n){return d(),p("header",null,[t("img",{onClick:o[0]||(o[0]=(...i)=>n.reload&&n.reload(...i)),src:U,alt:"Logo"}),ne,ae])}const ce=h(se,[["render",le],["__scopeId","data-v-82905c32"]]),re=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}),ie={props:{label:{type:String,default:null},totalAmount:{type:Number},amount:{type:Number,default:null}},computed:{amountVisual(){return this.amount!==null?this.amount:this.totalAmount},showLabel(){return this.label!==null?`Ahorro hasta la fecha ${this.label}`:"Ahorro total"},amountCurrency(){return re.format(this.amountVisual)}}},ue={class:"graphic"},de={class:"action"};function me(e,o,a,s,l,n){return d(),p("main",null,[t("p",null,A(n.showLabel),1),t("h1",null,A(n.amountCurrency),1),t("div",ue,[x(e.$slots,"graphic",{},void 0,!0)]),t("div",de,[x(e.$slots,"action",{},void 0,!0)])])}const ve=h(ie,[["render",me],["__scopeId","data-v-be1d5e7f"]]),_e="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M4.5%207.37193L5.625%2022.5H18.375L19.5%207.37193M4.5%207.37193H3L4.125%203.48113H6.75M4.5%207.37193H19.5M19.5%207.37193H21L20.25%203.48113H17.25M17.25%203.48113H12.375H6.75M17.25%203.48113L15.75%201.5H8.25L6.75%203.48113M9%2010.217V19.3302M15%2019.3302V10.217M12%2019.3302V10.217'%20stroke='%230689B0'%20stroke-width='2'/%3e%3c/svg%3e",pe={class:"movement"},he={class:"content"},fe={class:"action"},$e={__name:"Movement",props:{id:{type:String},title:{type:String},description:{type:String},amount:{type:Number}},emits:["remove"],setup(e,{emit:o}){const a=e,{id:s,title:l,description:n,amount:i}=T(a),v=()=>{c("remove",s.value)},u=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP"}),f=H(()=>u.format(i.value)),c=o,r=H(()=>i.value<0);return(_,m)=>(d(),p("div",pe,[t("div",he,[t("h4",null,A(V(l)),1),t("p",null,A(V(n)),1)]),t("div",fe,[t("img",{src:_e,alt:"borrar",onClick:v}),t("p",{class:J({red:r.value,green:!r.value})},A(f.value),3)])]))}},ge=h($e,[["__scopeId","data-v-73ec02c3"]]),ye=e=>(M("data-v-2528767c"),e=e(),I(),e),we={class:"movements"},be=ye(()=>t("h2",{class:"title"},"Historial",-1)),xe={class:"content"},Me={__name:"Index",props:{movements:{type:Array,default:()=>[]}},emits:["remove"],setup(e,{emit:o}){const a=e,{movements:s}=T(a),l=o,n=i=>{l("remove",i)};return(i,v)=>(d(),p("div",we,[be,t("div",xe,[(d(!0),p(R,null,X(V(s),({id:u,title:f,description:c,amount:r})=>(d(),D(ge,{key:u,id:u,title:f,description:c,amount:r,onRemove:n},null,8,["id","title","description","amount"]))),128))])]))}},Ie=h(Me,[["__scopeId","data-v-2528767c"]]),Le="data:image/svg+xml,%3csvg%20width='24'%20height='24'%20viewBox='0%200%2024%2024'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M2.12132%200L0%202.12132L9.54595%2011.6673L0%2021.2132L2.12132%2023.3345L11.6673%2013.7886L21.2132%2023.3345L23.3345%2021.2132L13.7886%2011.6673L23.3345%202.12133L21.2132%208.22544e-06L11.6673%209.54595L2.12132%200Z'%20fill='%230689B0'/%3e%3c/svg%3e",Se=e=>(M("data-v-1900a915"),e=e(),I(),e),Ce={class:"modal"},ke=Se(()=>t("p",null,"Nuevo Movimiento",-1)),Ae={class:"body"},He={__name:"Modal",emits:["close"],setup(e,{emit:o}){const a=o,s=()=>a("close");return(l,n)=>(d(),p("div",Ce,[t("div",{class:"head"},[ke,t("img",{src:Le,alt:"cerrar",onClick:s})]),t("div",Ae,[x(l.$slots,"default",{},void 0,!0)])]))}},Ne=h(He,[["__scopeId","data-v-1900a915"]]),L=e=>(M("data-v-471e7d62"),e=e(),I(),e),Ve={class:"field"},Be=L(()=>t("label",null,"Título",-1)),Re={class:"field"},Te=L(()=>t("label",null,"Monto",-1)),De={class:"field"},Fe=L(()=>t("label",null,"Descripción",-1)),Ge={class:"field"},Oe={class:"radio-label"},Ue=L(()=>t("span",null,"Ingreso",-1)),Pe={class:"radio-label"},Je=L(()=>t("span",null,"Gasto",-1)),Xe=L(()=>t("div",{class:"action"},[t("button",null,"Agregar movimiento")],-1)),ze={__name:"Action",emits:["create"],setup(e,{emit:o}){const a=g(!1),s=g(""),l=g(0),n=g(""),i=g("Ingreso"),v=o,u=()=>{a.value=!a.value,v("create",{title:s.value,description:n.value,amount:i.value==="Ingreso"?l.value:-l.value,time:new Date,id:JSON.stringify(new Date)}),s.value="",n.value="",l.value=0,i.value="Gasto"};return(f,c)=>(d(),p(R,null,[t("button",{onClick:c[0]||(c[0]=r=>a.value=!0)}," Agregar movimiento "),(d(),D(j,{to:"#app"},[$(w(Ne,{onClose:c[6]||(c[6]=r=>a.value=!1)},{default:b(()=>[t("form",{onSubmit:z(u,["prevent"])},[t("div",Ve,[Be,$(t("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=r=>s.value=r)},null,512),[[N,s.value]])]),t("div",Re,[Te,$(t("input",{type:"number","onUpdate:modelValue":c[2]||(c[2]=r=>l.value=r)},null,512),[[N,l.value]])]),t("div",De,[Fe,$(t("textarea",{rows:"4","onUpdate:modelValue":c[3]||(c[3]=r=>n.value=r)},null,512),[[N,n.value]])]),t("div",Ge,[t("label",Oe,[$(t("input",{type:"radio","onUpdate:modelValue":c[4]||(c[4]=r=>i.value=r),value:"Ingreso"},null,512),[[F,i.value]]),Ue]),t("label",Pe,[$(t("input",{type:"radio","onUpdate:modelValue":c[5]||(c[5]=r=>i.value=r),value:"Gasto"},null,512),[[F,i.value]]),Je])]),Xe],32)]),_:1},512),[[B,a.value]])]))],64))}},je=h(ze,[["__scopeId","data-v-471e7d62"]]),qe=e=>(M("data-v-e106fa2c"),e=e(),I(),e),Ee=["y1","y2"],We=["points"],Ze=["x1","x2"],Ke=qe(()=>t("p",null,"Ultimos 30 días",-1)),Qe={__name:"Graphic",props:{amounts:{type:Array,default:()=>[]}},emits:["select"],setup(e,{emit:o}){const a=e,{amounts:s}=T(a),l=_=>{let m=Math.min(...s.value),S=Math.max(...s.value);var C=_+Math.abs(m),k=Math.abs(S)+Math.abs(m);return 200-C*100/k*2},n=H(()=>l(0)),i=H(()=>{const _=s.value.length;return s.value.reduce((m,S,C)=>{const k=300/_*(C+1),O=l(S);return`${m} ${k},${O}`},`0, ${l(s.value.length?s.value[0]:0)}`)}),v=g(!1),u=g(0);q(u,_=>{const m=Math.ceil(_/(300/s.value.length));m<0||m>s.value.length||f("select",s.value[m-1])});const f=o,c=({target:_,touches:m})=>{v.value=!0;const S=_.getBoundingClientRect().width,C=_.getBoundingClientRect().x,k=m[0].clientX;u.value=(k-C)*300/S},r=()=>{v.value=!1};return(_,m)=>(d(),p("div",null,[(d(),p("svg",{viewBox:"0 0 300 200",onTouchstart:c,onTouchmove:c,onTouchend:r},[t("line",{stroke:"#c4c4c4","stroke-width":"2",x1:"0",y1:n.value,x2:"300",y2:n.value},null,8,Ee),t("polyline",{fill:"none",stroke:"#0689B0","stroke-witdh":"2",points:i.value},null,8,We),$(t("line",{stroke:"#04b500","stroke-witdh":"2",x1:u.value,y1:"0",x2:u.value,y2:"200"},null,8,Ze),[[B,v.value]])],32)),Ke]))}},Ye=h(Qe,[["__scopeId","data-v-e106fa2c"]]),et={components:{Layout:oe,Header:ce,Resume:ve,Movements:Ie,Action:je,Graphic:Ye},data(){return{amount:null,label:null,movements:[]}},computed:{amounts(){const e=this.movements.map(o=>o.amount);return e.map((o,a)=>{const s=e.slice(0,a+1);return o+s.reduce((l,n)=>l+n,0)})},totalAmount(){return this.movements.reduce((e,o)=>e+o.amount,0)}},mounted(){const e=JSON.parse(localStorage.getItem("movements"));Array.isArray(e)&&(this.movements=e.map(o=>({...o,time:new Date(o.time)})))},methods:{create(e){this.movements.push(e),this.save()},remove(e){let o=this.movements.findIndex(a=>a.id===e);this.movements.splice(o,1),this.save()},save(){localStorage.setItem("movements",JSON.stringify(this.movements))},select(e){console.log(e),this.amount=e}}};function tt(e,o,a,s,l,n){const i=y("Header"),v=y("Graphic"),u=y("Action"),f=y("Resume"),c=y("Movements"),r=y("Layout");return d(),D(r,null,{header:b(()=>[w(i)]),resume:b(()=>[w(f,{label:l.label,"total-amount":n.totalAmount,amount:l.amount},{graphic:b(()=>[w(v,{amounts:n.amounts,onSelect:n.select},null,8,["amounts","onSelect"])]),action:b(()=>[w(u,{onCreate:n.create},null,8,["onCreate"])]),_:1},8,["label","total-amount","amount"])]),movements:b(()=>[w(c,{movements:l.movements,onRemove:n.remove},null,8,["movements","onRemove"])]),_:1})}const st=h(et,[["render",tt]]);export{st as default};
